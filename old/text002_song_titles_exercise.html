<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Practicing tidytext with song titles</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-45631879-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-45631879-2');
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 66px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h2 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h3 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h4 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h5 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h6 {
  padding-top: 71px;
  margin-top: -71px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("text002_song_titles_exercise.Rmd");
});
</script>



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Computing for the Social Sciences</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="faq.html">FAQ</a>
</li>
<li>
  <a href="syllabus.html">Syllabus</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Practicing <code>tidytext</code> with song titles</h1>

</div>


<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(acs)
<span class="kw">library</span>(tidytext)
<span class="kw">library</span>(here)

<span class="kw">set.seed</span>(<span class="dv">1234</span>)
<span class="kw">theme_set</span>(<span class="kw">theme_minimal</span>())</code></pre></div>
<p>Today let’s practice our <code>tidytext</code> skills with a basic analysis of song titles. That is, how often is each U.S. state mentioned in a popular song? We’ll define popular songs as those in <em>Billboard</em>’s Year-End Hot 100 from 1958 to the present.</p>
<div id="download-population-data-for-u.s.-states" class="section level1">
<h1>Download population data for U.S. states</h1>
<blockquote>
<p>To import the data in-class, just use <code>read_csv(&quot;http://cfss.uchicago.edu/data/pop2016.csv&quot;)</code></p>
</blockquote>
<p>First let’s use the <code>acs</code> package to access the U.S. Census Bureau API and obtain population numbers for each state in 2016. This will help us later to normalize state mentions based on relative population size.<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># retrieve state populations in 2016 from Census Bureau ACS</span>
<span class="kw">library</span>(tidycensus)
pop_df &lt;-<span class="st"> </span><span class="kw">get_acs</span>(<span class="dt">geography =</span> <span class="st">&quot;state&quot;</span>, <span class="dt">year =</span> <span class="dv">2016</span>,
                    <span class="dt">variables =</span> <span class="kw">c</span>(<span class="dt">population =</span> <span class="st">&quot;B01003_001&quot;</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># remove moe and tidy the data frame</span>
<span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>moe) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">spread</span>(variable, estimate) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="co"># clean the data to match with the structure of the lyrics data</span>
<span class="st">  </span><span class="kw">rename</span>(<span class="dt">state_name =</span> NAME) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">state_name =</span> <span class="kw">str_to_lower</span>(state_name)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">filter</span>(state_name <span class="op">!=</span><span class="st"> &quot;Puerto Rico&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">write_csv</span>(<span class="st">&quot;data/pop2016.csv&quot;</span>)</code></pre></div>
<pre><code>## Getting data from the 2012-2016 5-year ACS</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># do these results make sense?</span>
pop_df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(population)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>## Selecting by population</code></pre>
<pre><code>## # A tibble: 10 x 3
##    GEOID state_name     population
##    &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;
##  1 06    california       38654206
##  2 48    texas            26956435
##  3 12    florida          19934451
##  4 36    new york         19697457
##  5 17    illinois         12851684
##  6 42    pennsylvania     12783977
##  7 39    ohio             11586941
##  8 13    georgia          10099320
##  9 37    north carolina    9940828
## 10 26    michigan          9909600</code></pre>
</div>
<div id="retrieve-song-lyrics" class="section level1">
<h1>Retrieve song lyrics</h1>
<blockquote>
<p>To import the data in-class, just use <code>read_csv(&quot;http://cfss.uchicago.edu/data/billboard_lyrics_1964-2015.csv&quot;)</code></p>
</blockquote>
<p>Next we need to retrieve the song lyrics for all our songs. <a href="http://kaylinwalker.com/50-years-of-pop-music/">Kaylin Walker</a> provides a <a href="https://github.com/walkerkq/musiclyrics">GitHub repo with the necessary files.</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">song_lyrics &lt;-<span class="st"> </span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;billboard_lyrics_1964-2015.csv&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">read_csv</span>()</code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   Rank = col_double(),
##   Song = col_character(),
##   Artist = col_character(),
##   Year = col_double(),
##   Lyrics = col_character(),
##   Source = col_double()
## )</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(song_lyrics)</code></pre></div>
<pre><code>## Observations: 5,100
## Variables: 6
## $ Rank   &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…
## $ Song   &lt;chr&gt; &quot;wooly bully&quot;, &quot;i cant help myself sugar pie honey bunch&quot;…
## $ Artist &lt;chr&gt; &quot;sam the sham and the pharaohs&quot;, &quot;four tops&quot;, &quot;the rollin…
## $ Year   &lt;dbl&gt; 1965, 1965, 1965, 1965, 1965, 1965, 1965, 1965, 1965, 196…
## $ Lyrics &lt;chr&gt; &quot;sam the sham miscellaneous wooly bully wooly bully sam t…
## $ Source &lt;dbl&gt; 3, 1, 1, 1, 1, 1, 3, 5, 1, 3, 3, 1, 3, 1, 3, 3, 3, 3, 1, …</code></pre>
</div>
<div id="find-and-visualize-the-state-names-in-the-song-lyrics" class="section level1">
<h1>Find and visualize the state names in the song lyrics</h1>
<p>Now your work begins!</p>
<div id="use-tidytext-to-create-a-data-frame-with-one-row-for-each-token-in-each-song" class="section level3">
<h3>Use <code>tidytext</code> to create a data frame with one row for each token in each song</h3>
<p>Hint: To search for matching state names, this data frame should include both <strong>unigrams</strong> and <strong>bi-grams</strong>.</p>
<details> <summary>Click for the solution</summary>
<p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy_lyrics &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(song_lyrics <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                           </span><span class="kw">unnest_tokens</span>(<span class="dt">output =</span> state_name,
                                         <span class="dt">input =</span> Lyrics),
                         song_lyrics <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">                           </span><span class="kw">unnest_tokens</span>(<span class="dt">output =</span> state_name,
                                         <span class="dt">input =</span> Lyrics, 
                                         <span class="dt">token =</span> <span class="st">&quot;ngrams&quot;</span>, <span class="dt">n =</span> <span class="dv">2</span>))
tidy_lyrics</code></pre></div>
<pre><code>## # A tibble: 3,201,465 x 6
##     Rank Song        Artist                       Year Source state_name  
##    &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                       &lt;int&gt;  &lt;int&gt; &lt;chr&gt;       
##  1     1 wooly bully sam the sham and the phara…  1965      3 sam         
##  2     1 wooly bully sam the sham and the phara…  1965      3 the         
##  3     1 wooly bully sam the sham and the phara…  1965      3 sham        
##  4     1 wooly bully sam the sham and the phara…  1965      3 miscellaneo…
##  5     1 wooly bully sam the sham and the phara…  1965      3 wooly       
##  6     1 wooly bully sam the sham and the phara…  1965      3 bully       
##  7     1 wooly bully sam the sham and the phara…  1965      3 wooly       
##  8     1 wooly bully sam the sham and the phara…  1965      3 bully       
##  9     1 wooly bully sam the sham and the phara…  1965      3 sam         
## 10     1 wooly bully sam the sham and the phara…  1965      3 the         
## # ... with 3,201,455 more rows</code></pre>
<p>The variable <code>state_name</code> in this data frame contains all the possible words and bigrams that might be state names in all the lyrics.</p>
</p>
<p></details></p>
</div>
<div id="find-all-the-state-names-occurring-in-the-song-lyrics" class="section level3">
<h3>Find all the state names occurring in the song lyrics</h3>
<p>First create a data frame that meets this criteria, then save a new data frame that only includes one observation for each matching song. That is, if the song is <a href="https://www.youtube.com/watch?v=btFfXgUdIzY">“New York, New York”</a>, there should only be one row in the resulting table for that song.</p>
<details> <summary>Click for the solution</summary>
<p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">inner_join</span>(tidy_lyrics, pop_df)</code></pre></div>
<pre><code>## Joining, by = &quot;state_name&quot;</code></pre>
<pre><code>## # A tibble: 526 x 8
##     Rank Song          Artist      Year Source state_name GEOID population
##    &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;      &lt;int&gt;  &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;dbl&gt;
##  1    12 king of the … roger mil…  1965      1 maine      23       1329923
##  2    29 eve of destr… barry mcg…  1965      1 alabama    01       4841164
##  3    49 california g… the beach…  1965      3 california 06      38654206
##  4    49 california g… the beach…  1965      3 california 06      38654206
##  5    49 california g… the beach…  1965      3 california 06      38654206
##  6    49 california g… the beach…  1965      3 california 06      38654206
##  7    49 california g… the beach…  1965      3 california 06      38654206
##  8    49 california g… the beach…  1965      3 california 06      38654206
##  9    49 california g… the beach…  1965      3 california 06      38654206
## 10    49 california g… the beach…  1965      3 california 06      38654206
## # ... with 516 more rows</code></pre>
<p>Let’s only count each state once per song that it is mentioned in.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy_lyrics &lt;-<span class="st"> </span><span class="kw">inner_join</span>(tidy_lyrics, pop_df) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">distinct</span>(Rank, Song, Artist, Year, state_name, <span class="dt">.keep_all =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## Joining, by = &quot;state_name&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy_lyrics</code></pre></div>
<pre><code>## # A tibble: 253 x 8
##     Rank Song        Artist        Year Source state_name GEOID population
##    &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;        &lt;int&gt;  &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;dbl&gt;
##  1    12 king of th… roger miller  1965      1 maine      23       1329923
##  2    29 eve of des… barry mcgui…  1965      1 alabama    01       4841164
##  3    49 california… the beach b…  1965      3 california 06      38654206
##  4    10 california… the mamas  …  1966      3 california 06      38654206
##  5    77 message to… dionne warw…  1966      1 kentucky   21       4411989
##  6    61 california… lesley gore   1967      1 california 06      38654206
##  7     4 sittin on … otis redding  1968      1 georgia    13      10099320
##  8    10 tighten up  archie bell…  1968      3 texas      48      26956435
##  9    25 get back    the beatles…  1969      3 arizona    04       6728577
## 10    25 get back    the beatles…  1969      3 california 06      38654206
## # ... with 243 more rows</code></pre>
</p>
<p></details></p>
</div>
<div id="calculate-the-frequency-for-each-states-mention-in-a-song-and-create-a-new-column-for-the-frequency-adjusted-by-the-states-population" class="section level3">
<h3>Calculate the frequency for each state’s mention in a song and create a new column for the frequency adjusted by the state’s population</h3>
<details> <summary>Click for the solution</summary>
<p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(state_counts &lt;-<span class="st"> </span>tidy_lyrics <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">count</span>(state_name) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">   </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n)))</code></pre></div>
<pre><code>## # A tibble: 33 x 2
##    state_name      n
##    &lt;chr&gt;       &lt;int&gt;
##  1 new york       64
##  2 california     34
##  3 georgia        22
##  4 tennessee      14
##  5 texas          14
##  6 alabama        12
##  7 mississippi    10
##  8 kentucky        7
##  9 hawaii          6
## 10 illinois        6
## # ... with 23 more rows</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pop_df &lt;-<span class="st"> </span>pop_df <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">left_join</span>(state_counts) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">rate =</span> n <span class="op">/</span><span class="st"> </span>population <span class="op">*</span><span class="st"> </span><span class="fl">1e6</span>)</code></pre></div>
<pre><code>## Joining, by = &quot;state_name&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pop_df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(rate)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">top_n</span>(<span class="dv">10</span>)</code></pre></div>
<pre><code>## Selecting by rate</code></pre>
<pre><code>## # A tibble: 10 x 5
##    GEOID state_name  population     n  rate
##    &lt;chr&gt; &lt;chr&gt;            &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;
##  1 15    hawaii         1413673     6  4.24
##  2 28    mississippi    2989192    10  3.35
##  3 36    new york      19697457    64  3.25
##  4 01    alabama        4841164    12  2.48
##  5 23    maine          1329923     3  2.26
##  6 13    georgia       10099320    22  2.18
##  7 47    tennessee      6548009    14  2.14
##  8 30    montana        1023391     2  1.95
##  9 31    nebraska       1881259     3  1.59
## 10 21    kentucky       4411989     7  1.59</code></pre>
</p>
<p></details></p>
</div>
<div id="make-a-choropleth-map-for-both-the-raw-frequency-counts-and-relative-frequency-counts" class="section level3">
<h3>Make a choropleth map for both the raw frequency counts and relative frequency counts</h3>
<p>The <a href="https://github.com/hrbrmstr/statebins"><code>statebins</code> package</a> is a nifty shortcut for making basic U.S. cartogram maps.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(statebins)

pop_df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">state_name =</span> stringr<span class="op">::</span><span class="kw">str_to_title</span>(state_name),
         <span class="dt">state_name =</span> <span class="kw">if_else</span>(state_name <span class="op">==</span><span class="st"> &quot;District Of Columbia&quot;</span>,
                              <span class="st">&quot;District of Columbia&quot;</span>, state_name)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">statebins_continuous</span>(<span class="dt">state_col =</span> <span class="st">&quot;state_name&quot;</span>, <span class="dt">value_col =</span> <span class="st">&quot;n&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Frequency of states mentioned in song lyrics&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Number of mentions&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</code></pre></div>
<p><img src="text002_song_titles_exercise_files/figure-html/state-map-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pop_df <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">state_name =</span> stringr<span class="op">::</span><span class="kw">str_to_title</span>(state_name),
         <span class="dt">state_name =</span> <span class="kw">if_else</span>(state_name <span class="op">==</span><span class="st"> &quot;District Of Columbia&quot;</span>,
                              <span class="st">&quot;District of Columbia&quot;</span>, state_name)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">statebins_continuous</span>(<span class="dt">state_col =</span> <span class="st">&quot;state_name&quot;</span>, <span class="dt">value_col =</span> <span class="st">&quot;rate&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Frequency of states mentioned in song lyrics&quot;</span>,
       <span class="dt">subtitle =</span> <span class="st">&quot;Number of mentions per capita&quot;</span>) <span class="op">+</span>
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</code></pre></div>
<p><img src="text002_song_titles_exercise_files/figure-html/state-map-2.png" width="672" /></p>
</div>
</div>
<div id="acknowledgments" class="section level1 toc-ignore">
<h1>Acknowledgments</h1>
<ul>
<li>This page is derived in part from <a href="https://juliasilge.com/blog/song-lyrics-across/">SONG LYRICS ACROSS THE UNITED STATES</a> and licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
</ul>
</div>
<div id="session-info" class="section level1 toc-ignore">
<h1>Session Info</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw">session_info</span>()</code></pre></div>
<pre><code>## ─ Session info ──────────────────────────────────────────────────────────
##  setting  value                       
##  version  R version 3.5.2 (2018-12-20)
##  os       macOS Mojave 10.14.3        
##  system   x86_64, darwin15.6.0        
##  ui       X11                         
##  language (EN)                        
##  collate  en_US.UTF-8                 
##  ctype    en_US.UTF-8                 
##  tz       America/Chicago             
##  date     2019-03-02                  
## 
## ─ Packages ──────────────────────────────────────────────────────────────
##  package      * version    date       lib source                          
##  acs          * 2.1.4      2019-02-19 [2] CRAN (R 3.5.2)                  
##  assertthat     0.2.0      2017-04-11 [2] CRAN (R 3.5.0)                  
##  backports      1.1.3      2018-12-14 [2] CRAN (R 3.5.0)                  
##  base64enc      0.1-3      2015-07-28 [2] CRAN (R 3.5.0)                  
##  bindr          0.1.1      2018-03-13 [2] CRAN (R 3.5.0)                  
##  bindrcpp     * 0.2.2      2018-03-29 [1] CRAN (R 3.5.0)                  
##  broom          0.5.1      2018-12-05 [2] CRAN (R 3.5.0)                  
##  callr          3.1.1      2018-12-21 [2] CRAN (R 3.5.0)                  
##  cellranger     1.1.0      2016-07-27 [2] CRAN (R 3.5.0)                  
##  class          7.3-15     2019-01-01 [2] CRAN (R 3.5.2)                  
##  classInt       0.3-1      2018-12-18 [2] CRAN (R 3.5.0)                  
##  cli            1.0.1      2018-09-25 [1] CRAN (R 3.5.0)                  
##  codetools      0.2-16     2018-12-24 [2] CRAN (R 3.5.2)                  
##  colorspace     1.4-0      2019-01-13 [2] CRAN (R 3.5.2)                  
##  crayon         1.3.4      2017-09-16 [2] CRAN (R 3.5.0)                  
##  DBI            1.0.0      2018-05-02 [2] CRAN (R 3.5.0)                  
##  desc           1.2.0      2018-05-01 [2] CRAN (R 3.5.0)                  
##  devtools       2.0.1      2018-10-26 [1] CRAN (R 3.5.1)                  
##  digest         0.6.18     2018-10-10 [1] CRAN (R 3.5.0)                  
##  dplyr        * 0.8.0.1    2019-02-15 [1] CRAN (R 3.5.2)                  
##  e1071          1.7-0.1    2019-01-21 [1] CRAN (R 3.5.2)                  
##  evaluate       0.13       2019-02-12 [2] CRAN (R 3.5.2)                  
##  fansi          0.4.0      2018-10-05 [2] CRAN (R 3.5.0)                  
##  forcats      * 0.4.0      2019-02-17 [2] CRAN (R 3.5.2)                  
##  foreign        0.8-71     2018-07-20 [2] CRAN (R 3.5.2)                  
##  fs             1.2.6      2018-08-23 [1] CRAN (R 3.5.0)                  
##  generics       0.0.2      2018-11-29 [1] CRAN (R 3.5.0)                  
##  ggplot2      * 3.1.0      2018-10-25 [1] CRAN (R 3.5.0)                  
##  glue           1.3.0      2018-07-17 [2] CRAN (R 3.5.0)                  
##  gridExtra      2.3        2017-09-09 [2] CRAN (R 3.5.0)                  
##  gtable         0.2.0      2016-02-26 [2] CRAN (R 3.5.0)                  
##  haven          2.1.0      2019-02-19 [2] CRAN (R 3.5.2)                  
##  here         * 0.1        2017-05-28 [2] CRAN (R 3.5.0)                  
##  hms            0.4.2      2018-03-10 [2] CRAN (R 3.5.0)                  
##  htmltools      0.3.6      2017-04-28 [1] CRAN (R 3.5.0)                  
##  httr           1.4.0      2018-12-11 [2] CRAN (R 3.5.0)                  
##  janeaustenr    0.1.5      2017-06-10 [2] CRAN (R 3.5.0)                  
##  jsonlite       1.6        2018-12-07 [2] CRAN (R 3.5.0)                  
##  knitr          1.21       2018-12-10 [2] CRAN (R 3.5.1)                  
##  lattice        0.20-38    2018-11-04 [2] CRAN (R 3.5.2)                  
##  lazyeval       0.2.1      2017-10-29 [2] CRAN (R 3.5.0)                  
##  lubridate      1.7.4      2018-04-11 [2] CRAN (R 3.5.0)                  
##  magrittr       1.5        2014-11-22 [2] CRAN (R 3.5.0)                  
##  maptools       0.9-5      2019-02-18 [1] CRAN (R 3.5.2)                  
##  Matrix         1.2-15     2018-11-01 [2] CRAN (R 3.5.2)                  
##  memoise        1.1.0      2017-04-21 [2] CRAN (R 3.5.0)                  
##  modelr         0.1.4      2019-02-18 [2] CRAN (R 3.5.2)                  
##  munsell        0.5.0      2018-06-12 [2] CRAN (R 3.5.0)                  
##  nlme           3.1-137    2018-04-07 [2] CRAN (R 3.5.2)                  
##  pillar         1.3.1      2018-12-15 [2] CRAN (R 3.5.0)                  
##  pkgbuild       1.0.2      2018-10-16 [1] CRAN (R 3.5.0)                  
##  pkgconfig      2.0.2      2018-08-16 [2] CRAN (R 3.5.1)                  
##  pkgload        1.0.2      2018-10-29 [1] CRAN (R 3.5.0)                  
##  plyr           1.8.4      2016-06-08 [2] CRAN (R 3.5.0)                  
##  prettyunits    1.0.2      2015-07-13 [2] CRAN (R 3.5.0)                  
##  processx       3.2.1      2018-12-05 [2] CRAN (R 3.5.0)                  
##  ps             1.3.0      2018-12-21 [2] CRAN (R 3.5.0)                  
##  purrr        * 0.3.0      2019-01-27 [2] CRAN (R 3.5.2)                  
##  R6             2.4.0      2019-02-14 [1] CRAN (R 3.5.2)                  
##  rappdirs       0.3.1      2016-03-28 [2] CRAN (R 3.5.0)                  
##  RColorBrewer   1.1-2      2014-12-07 [2] CRAN (R 3.5.0)                  
##  Rcpp           1.0.0      2018-11-07 [1] CRAN (R 3.5.0)                  
##  readr        * 1.3.1      2018-12-21 [2] CRAN (R 3.5.0)                  
##  readxl         1.3.0      2019-02-15 [2] CRAN (R 3.5.2)                  
##  remotes        2.0.2      2018-10-30 [1] CRAN (R 3.5.0)                  
##  rgdal          1.3-9      2019-02-21 [1] CRAN (R 3.5.2)                  
##  rlang          0.3.1      2019-01-08 [1] CRAN (R 3.5.2)                  
##  rmarkdown      1.11       2018-12-08 [2] CRAN (R 3.5.0)                  
##  rprojroot      1.3-2      2018-01-03 [2] CRAN (R 3.5.0)                  
##  rstudioapi     0.9.0      2019-01-09 [1] CRAN (R 3.5.2)                  
##  rvest          0.3.2      2016-06-17 [2] CRAN (R 3.5.0)                  
##  scales         1.0.0      2018-08-09 [1] CRAN (R 3.5.0)                  
##  sessioninfo    1.1.1      2018-11-05 [1] CRAN (R 3.5.0)                  
##  sf             0.7-3      2019-02-21 [1] CRAN (R 3.5.2)                  
##  SnowballC      0.6.0      2019-01-15 [2] CRAN (R 3.5.2)                  
##  sp             1.3-1      2018-06-05 [2] CRAN (R 3.5.0)                  
##  statebins    * 1.2.2      2015-12-21 [2] CRAN (R 3.5.0)                  
##  stringi        1.3.1      2019-02-13 [1] CRAN (R 3.5.2)                  
##  stringr      * 1.4.0      2019-02-10 [1] CRAN (R 3.5.2)                  
##  testthat       2.0.1      2018-10-13 [2] CRAN (R 3.5.0)                  
##  tibble       * 2.0.1      2019-01-12 [2] CRAN (R 3.5.2)                  
##  tidycensus   * 0.9        2019-01-09 [1] CRAN (R 3.5.2)                  
##  tidyr        * 0.8.2.9000 2019-02-11 [1] Github (tidyverse/tidyr@0b27690)
##  tidyselect     0.2.5      2018-10-11 [1] CRAN (R 3.5.0)                  
##  tidytext     * 0.2.0      2018-10-17 [1] CRAN (R 3.5.0)                  
##  tidyverse    * 1.2.1      2017-11-14 [2] CRAN (R 3.5.0)                  
##  tigris         0.7        2018-04-14 [1] CRAN (R 3.5.0)                  
##  tokenizers     0.2.1      2018-03-29 [2] CRAN (R 3.5.0)                  
##  units          0.6-2      2018-12-05 [1] CRAN (R 3.5.0)                  
##  usethis        1.4.0      2018-08-14 [1] CRAN (R 3.5.0)                  
##  utf8           1.1.4      2018-05-24 [2] CRAN (R 3.5.0)                  
##  uuid           0.1-2      2015-07-28 [2] CRAN (R 3.5.0)                  
##  withr          2.1.2      2018-03-15 [2] CRAN (R 3.5.0)                  
##  xfun           0.5        2019-02-20 [1] CRAN (R 3.5.2)                  
##  XML          * 3.98-1.17  2019-02-08 [2] CRAN (R 3.5.2)                  
##  xml2           1.2.0      2018-01-24 [2] CRAN (R 3.5.0)                  
##  yaml           2.2.0      2018-07-25 [2] CRAN (R 3.5.0)                  
## 
## [1] /Users/soltoffbc/Library/R/3.5/library
## [2] /Library/Frameworks/R.framework/Versions/3.5/Resources/library</code></pre>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>For instance, California has a lot more people than Rhode Island so it makes sense that California would be mentioned more often in popular songs. But per capita, are these mentions different?<a href="#fnref1">↩</a></p></li>
</ol>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiUHJhY3RpY2luZyBgdGlkeXRleHRgIHdpdGggc29uZyB0aXRsZXMiCm91dHB1dDoKICBodG1sX2RvY3VtZW50OgogICAgdG9jOiB0cnVlCiAgICB0b2NfZmxvYXQ6IHRydWUKLS0tCgpgYGB7ciBzZXR1cCwgaW5jbHVkZSA9IEZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoY2FjaGUgPSBUUlVFKQpgYGAKCmBgYHtyIHBhY2thZ2VzLCBjYWNoZSA9IEZBTFNFLCBtZXNzYWdlID0gRkFMU0UsIHdhcm5pbmcgPSBGQUxTRX0KbGlicmFyeSh0aWR5dmVyc2UpCmxpYnJhcnkoYWNzKQpsaWJyYXJ5KHRpZHl0ZXh0KQpsaWJyYXJ5KGhlcmUpCgpzZXQuc2VlZCgxMjM0KQp0aGVtZV9zZXQodGhlbWVfbWluaW1hbCgpKQpgYGAKClRvZGF5IGxldCdzIHByYWN0aWNlIG91ciBgdGlkeXRleHRgIHNraWxscyB3aXRoIGEgYmFzaWMgYW5hbHlzaXMgb2Ygc29uZyB0aXRsZXMuIFRoYXQgaXMsIGhvdyBvZnRlbiBpcyBlYWNoIFUuUy4gc3RhdGUgbWVudGlvbmVkIGluIGEgcG9wdWxhciBzb25nPyBXZSdsbCBkZWZpbmUgcG9wdWxhciBzb25ncyBhcyB0aG9zZSBpbiAqQmlsbGJvYXJkKidzIFllYXItRW5kIEhvdCAxMDAgZnJvbSAxOTU4IHRvIHRoZSBwcmVzZW50LgoKIyBEb3dubG9hZCBwb3B1bGF0aW9uIGRhdGEgZm9yIFUuUy4gc3RhdGVzCgo+IFRvIGltcG9ydCB0aGUgZGF0YSBpbi1jbGFzcywganVzdCB1c2UgYHJlYWRfY3N2KCJodHRwOi8vY2Zzcy51Y2hpY2Fnby5lZHUvZGF0YS9wb3AyMDE2LmNzdiIpYAoKRmlyc3QgbGV0J3MgdXNlIHRoZSBgYWNzYCBwYWNrYWdlIHRvIGFjY2VzcyB0aGUgVS5TLiBDZW5zdXMgQnVyZWF1IEFQSSBhbmQgb2J0YWluIHBvcHVsYXRpb24gbnVtYmVycyBmb3IgZWFjaCBzdGF0ZSBpbiAyMDE2LiBUaGlzIHdpbGwgaGVscCB1cyBsYXRlciB0byBub3JtYWxpemUgc3RhdGUgbWVudGlvbnMgYmFzZWQgb24gcmVsYXRpdmUgcG9wdWxhdGlvbiBzaXplLl5bRm9yIGluc3RhbmNlLCBDYWxpZm9ybmlhIGhhcyBhIGxvdCBtb3JlIHBlb3BsZSB0aGFuIFJob2RlIElzbGFuZCBzbyBpdCBtYWtlcyBzZW5zZSB0aGF0IENhbGlmb3JuaWEgd291bGQgYmUgbWVudGlvbmVkIG1vcmUgb2Z0ZW4gaW4gcG9wdWxhciBzb25ncy4gQnV0IHBlciBjYXBpdGEsIGFyZSB0aGVzZSBtZW50aW9ucyBkaWZmZXJlbnQ/XQoKYGBge3IgYWNzLXBvcH0KIyByZXRyaWV2ZSBzdGF0ZSBwb3B1bGF0aW9ucyBpbiAyMDE2IGZyb20gQ2Vuc3VzIEJ1cmVhdSBBQ1MKbGlicmFyeSh0aWR5Y2Vuc3VzKQpwb3BfZGYgPC0gZ2V0X2FjcyhnZW9ncmFwaHkgPSAic3RhdGUiLCB5ZWFyID0gMjAxNiwKICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXMgPSBjKHBvcHVsYXRpb24gPSAiQjAxMDAzXzAwMSIpKSAlPiUKICAjIHJlbW92ZSBtb2UgYW5kIHRpZHkgdGhlIGRhdGEgZnJhbWUKICBzZWxlY3QoLW1vZSkgJT4lCiAgc3ByZWFkKHZhcmlhYmxlLCBlc3RpbWF0ZSkgJT4lCiAgIyBjbGVhbiB0aGUgZGF0YSB0byBtYXRjaCB3aXRoIHRoZSBzdHJ1Y3R1cmUgb2YgdGhlIGx5cmljcyBkYXRhCiAgcmVuYW1lKHN0YXRlX25hbWUgPSBOQU1FKSAlPiUKICBtdXRhdGUoc3RhdGVfbmFtZSA9IHN0cl90b19sb3dlcihzdGF0ZV9uYW1lKSkgJT4lCiAgZmlsdGVyKHN0YXRlX25hbWUgIT0gIlB1ZXJ0byBSaWNvIikgJT4lCiAgd3JpdGVfY3N2KCJkYXRhL3BvcDIwMTYuY3N2IikKCiMgZG8gdGhlc2UgcmVzdWx0cyBtYWtlIHNlbnNlPwpwb3BfZGYgJT4lIAogIGFycmFuZ2UoZGVzYyhwb3B1bGF0aW9uKSkgJT4lCiAgdG9wX24oMTApCmBgYAoKIyBSZXRyaWV2ZSBzb25nIGx5cmljcwoKPiBUbyBpbXBvcnQgdGhlIGRhdGEgaW4tY2xhc3MsIGp1c3QgdXNlIGByZWFkX2NzdigiaHR0cDovL2Nmc3MudWNoaWNhZ28uZWR1L2RhdGEvYmlsbGJvYXJkX2x5cmljc18xOTY0LTIwMTUuY3N2IilgCgpOZXh0IHdlIG5lZWQgdG8gcmV0cmlldmUgdGhlIHNvbmcgbHlyaWNzIGZvciBhbGwgb3VyIHNvbmdzLiBbS2F5bGluIFdhbGtlcl0oaHR0cDovL2theWxpbndhbGtlci5jb20vNTAteWVhcnMtb2YtcG9wLW11c2ljLykgcHJvdmlkZXMgYSBbR2l0SHViIHJlcG8gd2l0aCB0aGUgbmVjZXNzYXJ5IGZpbGVzLl0oaHR0cHM6Ly9naXRodWIuY29tL3dhbGtlcmtxL211c2ljbHlyaWNzKQoKYGBge3IgbHlyaWNzLWRvd25sb2FkLCBpbmNsdWRlID0gRkFMU0UsIGV2YWwgPSBGQUxTRX0KIyBkb3dubG9hZCBmaWxlIGZyb20gR2l0SHViIHJlcG8KbGlicmFyeShkb3dubG9hZGVyKQpkb3dubG9hZCgiaHR0cHM6Ly9naXRodWIuY29tL3dhbGtlcmtxL211c2ljbHlyaWNzL3Jhdy9tYXN0ZXIvYmlsbGJvYXJkX2x5cmljc18xOTY0LTIwMTUuY3N2IiwKICAgICAgICAgZGVzdGZpbGUgPSAiZGF0YS9iaWxsYm9hcmRfbHlyaWNzXzE5NjQtMjAxNS5jc3YiKQpgYGAKCmBgYHtyIGx5cmljcy1pbXBvcnR9CnNvbmdfbHlyaWNzIDwtIGhlcmUoImRhdGEiLCAiYmlsbGJvYXJkX2x5cmljc18xOTY0LTIwMTUuY3N2IikgJT4lCiAgcmVhZF9jc3YoKQpnbGltcHNlKHNvbmdfbHlyaWNzKQpgYGAKCiMgRmluZCBhbmQgdmlzdWFsaXplIHRoZSBzdGF0ZSBuYW1lcyBpbiB0aGUgc29uZyBseXJpY3MKCk5vdyB5b3VyIHdvcmsgYmVnaW5zIQoKIyMjIFVzZSBgdGlkeXRleHRgIHRvIGNyZWF0ZSBhIGRhdGEgZnJhbWUgd2l0aCBvbmUgcm93IGZvciBlYWNoIHRva2VuIGluIGVhY2ggc29uZwoKSGludDogVG8gc2VhcmNoIGZvciBtYXRjaGluZyBzdGF0ZSBuYW1lcywgdGhpcyBkYXRhIGZyYW1lIHNob3VsZCBpbmNsdWRlIGJvdGggKip1bmlncmFtcyoqIGFuZCAqKmJpLWdyYW1zKiouCgo8ZGV0YWlscz4gCiAgPHN1bW1hcnk+Q2xpY2sgZm9yIHRoZSBzb2x1dGlvbjwvc3VtbWFyeT4KICA8cD4KICAKYGBge3IgbHlyaWNzLXRpZHl9CnRpZHlfbHlyaWNzIDwtIGJpbmRfcm93cyhzb25nX2x5cmljcyAlPiUgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubmVzdF90b2tlbnMob3V0cHV0ID0gc3RhdGVfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IEx5cmljcyksCiAgICAgICAgICAgICAgICAgICAgICAgICBzb25nX2x5cmljcyAlPiUgCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubmVzdF90b2tlbnMob3V0cHV0ID0gc3RhdGVfbmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCA9IEx5cmljcywgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSAibmdyYW1zIiwgbiA9IDIpKQp0aWR5X2x5cmljcwpgYGAKClRoZSB2YXJpYWJsZSBgc3RhdGVfbmFtZWAgaW4gdGhpcyBkYXRhIGZyYW1lIGNvbnRhaW5zIGFsbCB0aGUgcG9zc2libGUgd29yZHMgYW5kIGJpZ3JhbXMgdGhhdCBtaWdodCBiZSBzdGF0ZSBuYW1lcyBpbiBhbGwgdGhlIGx5cmljcy4KCiAgPC9wPgo8L2RldGFpbHM+CgojIyMgRmluZCBhbGwgdGhlIHN0YXRlIG5hbWVzIG9jY3VycmluZyBpbiB0aGUgc29uZyBseXJpY3MKCkZpcnN0IGNyZWF0ZSBhIGRhdGEgZnJhbWUgdGhhdCBtZWV0cyB0aGlzIGNyaXRlcmlhLCB0aGVuIHNhdmUgYSBuZXcgZGF0YSBmcmFtZSB0aGF0IG9ubHkgaW5jbHVkZXMgb25lIG9ic2VydmF0aW9uIGZvciBlYWNoIG1hdGNoaW5nIHNvbmcuIFRoYXQgaXMsIGlmIHRoZSBzb25nIGlzIFsiTmV3IFlvcmssIE5ldyBZb3JrIl0oaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1idEZmWGdVZEl6WSksIHRoZXJlIHNob3VsZCBvbmx5IGJlIG9uZSByb3cgaW4gdGhlIHJlc3VsdGluZyB0YWJsZSBmb3IgdGhhdCBzb25nLgoKPGRldGFpbHM+IAogIDxzdW1tYXJ5PkNsaWNrIGZvciB0aGUgc29sdXRpb248L3N1bW1hcnk+CiAgPHA+CiAgCmBgYHtyIGx5cmljcy1zdGF0ZS1uYW1lc30KaW5uZXJfam9pbih0aWR5X2x5cmljcywgcG9wX2RmKQpgYGAKCkxldCdzIG9ubHkgY291bnQgZWFjaCBzdGF0ZSBvbmNlIHBlciBzb25nIHRoYXQgaXQgaXMgbWVudGlvbmVkIGluLgoKYGBge3IgbHlyaWNzLXN0YXRlLWRpc3RpbmN0fQp0aWR5X2x5cmljcyA8LSBpbm5lcl9qb2luKHRpZHlfbHlyaWNzLCBwb3BfZGYpICU+JQogIGRpc3RpbmN0KFJhbmssIFNvbmcsIEFydGlzdCwgWWVhciwgc3RhdGVfbmFtZSwgLmtlZXBfYWxsID0gVFJVRSkKdGlkeV9seXJpY3MKYGBgCgogIDwvcD4KPC9kZXRhaWxzPgoKIyMjIENhbGN1bGF0ZSB0aGUgZnJlcXVlbmN5IGZvciBlYWNoIHN0YXRlJ3MgbWVudGlvbiBpbiBhIHNvbmcgYW5kIGNyZWF0ZSBhIG5ldyBjb2x1bW4gZm9yIHRoZSBmcmVxdWVuY3kgYWRqdXN0ZWQgYnkgdGhlIHN0YXRlJ3MgcG9wdWxhdGlvbgoKPGRldGFpbHM+IAogIDxzdW1tYXJ5PkNsaWNrIGZvciB0aGUgc29sdXRpb248L3N1bW1hcnk+CiAgPHA+CiAgCmBgYHtyIHN0YXRlLWNvdW50c30KKHN0YXRlX2NvdW50cyA8LSB0aWR5X2x5cmljcyAlPiUgCiAgIGNvdW50KHN0YXRlX25hbWUpICU+JSAKICAgYXJyYW5nZShkZXNjKG4pKSkKYGBgCgpgYGB7ciBzdGF0ZS1jb3VudHMtcG9wcmVsfQpwb3BfZGYgPC0gcG9wX2RmICU+JSAKICBsZWZ0X2pvaW4oc3RhdGVfY291bnRzKSAlPiUgCiAgbXV0YXRlKHJhdGUgPSBuIC8gcG9wdWxhdGlvbiAqIDFlNikKCnBvcF9kZiAlPiUKICBhcnJhbmdlKGRlc2MocmF0ZSkpICU+JQogIHRvcF9uKDEwKQpgYGAKCiAgPC9wPgo8L2RldGFpbHM+CgojIyMgTWFrZSBhIGNob3JvcGxldGggbWFwIGZvciBib3RoIHRoZSByYXcgZnJlcXVlbmN5IGNvdW50cyBhbmQgcmVsYXRpdmUgZnJlcXVlbmN5IGNvdW50cwoKVGhlIFtgc3RhdGViaW5zYCBwYWNrYWdlXShodHRwczovL2dpdGh1Yi5jb20vaHJicm1zdHIvc3RhdGViaW5zKSBpcyBhIG5pZnR5IHNob3J0Y3V0IGZvciBtYWtpbmcgYmFzaWMgVS5TLiBjYXJ0b2dyYW0gbWFwcy4KCmBgYHtyIHN0YXRlLW1hcCwgd2FybmluZyA9IEZBTFNFfQpsaWJyYXJ5KHN0YXRlYmlucykKCnBvcF9kZiAlPiUKICBtdXRhdGUoc3RhdGVfbmFtZSA9IHN0cmluZ3I6OnN0cl90b190aXRsZShzdGF0ZV9uYW1lKSwKICAgICAgICAgc3RhdGVfbmFtZSA9IGlmX2Vsc2Uoc3RhdGVfbmFtZSA9PSAiRGlzdHJpY3QgT2YgQ29sdW1iaWEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGlzdHJpY3Qgb2YgQ29sdW1iaWEiLCBzdGF0ZV9uYW1lKSkgJT4lCiAgc3RhdGViaW5zX2NvbnRpbnVvdXMoc3RhdGVfY29sID0gInN0YXRlX25hbWUiLCB2YWx1ZV9jb2wgPSAibiIpICsKICBsYWJzKHRpdGxlID0gIkZyZXF1ZW5jeSBvZiBzdGF0ZXMgbWVudGlvbmVkIGluIHNvbmcgbHlyaWNzIiwKICAgICAgIHN1YnRpdGxlID0gIk51bWJlciBvZiBtZW50aW9ucyIpICsKICB0aGVtZShsZWdlbmQucG9zaXRpb24gPSAiYm90dG9tIikKCnBvcF9kZiAlPiUKICBtdXRhdGUoc3RhdGVfbmFtZSA9IHN0cmluZ3I6OnN0cl90b190aXRsZShzdGF0ZV9uYW1lKSwKICAgICAgICAgc3RhdGVfbmFtZSA9IGlmX2Vsc2Uoc3RhdGVfbmFtZSA9PSAiRGlzdHJpY3QgT2YgQ29sdW1iaWEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRGlzdHJpY3Qgb2YgQ29sdW1iaWEiLCBzdGF0ZV9uYW1lKSkgJT4lCiAgc3RhdGViaW5zX2NvbnRpbnVvdXMoc3RhdGVfY29sID0gInN0YXRlX25hbWUiLCB2YWx1ZV9jb2wgPSAicmF0ZSIpICsKICBsYWJzKHRpdGxlID0gIkZyZXF1ZW5jeSBvZiBzdGF0ZXMgbWVudGlvbmVkIGluIHNvbmcgbHlyaWNzIiwKICAgICAgIHN1YnRpdGxlID0gIk51bWJlciBvZiBtZW50aW9ucyBwZXIgY2FwaXRhIikgKwogIHRoZW1lKGxlZ2VuZC5wb3NpdGlvbiA9ICJib3R0b20iKQpgYGAKCiMgQWNrbm93bGVkZ21lbnRzIHsudG9jLWlnbm9yZX0KCiogVGhpcyBwYWdlIGlzIGRlcml2ZWQgaW4gcGFydCBmcm9tIFtTT05HIExZUklDUyBBQ1JPU1MgVEhFIFVOSVRFRCBTVEFURVNdKGh0dHBzOi8vanVsaWFzaWxnZS5jb20vYmxvZy9zb25nLWx5cmljcy1hY3Jvc3MvKSBhbmQgbGljZW5zZWQgdW5kZXIgYSBbQ3JlYXRpdmUgQ29tbW9ucyBBdHRyaWJ1dGlvbi1TaGFyZUFsaWtlIDQuMCBJbnRlcm5hdGlvbmFsIExpY2Vuc2VdKGh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS80LjAvKS4KCiMgU2Vzc2lvbiBJbmZvIHsudG9jLWlnbm9yZX0KCmBgYHtyIGNoaWxkPSdfc2Vzc2lvbmluZm8uUm1kJ30KYGBgCg==</div>
<p>This work is licensed under the  <a href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0 Creative Commons License</a>.</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
